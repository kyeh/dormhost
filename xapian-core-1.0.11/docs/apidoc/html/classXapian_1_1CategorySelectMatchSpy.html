<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Xapian: API Documentation: xapian-core: Xapian::CategorySelectMatchSpy Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li class="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="namespaceXapian.html">Xapian</a>::<a class="el" href="classXapian_1_1CategorySelectMatchSpy.html">CategorySelectMatchSpy</a></div>
<h1>Xapian::CategorySelectMatchSpy Class Reference</h1><!-- doxytag: class="Xapian::CategorySelectMatchSpy" --><!-- doxytag: inherits="Xapian::ValueCountMatchSpy" -->MatchSpy for classifying matching documents by their values.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="matchspy_8h-source.html">matchspy.h</a>&gt;</code>
<p>
Inheritance diagram for Xapian::CategorySelectMatchSpy:<p><center><img src="classXapian_1_1CategorySelectMatchSpy__inherit__graph.png" border="0" usemap="#Xapian_1_1CategorySelectMatchSpy__inherit__map" alt="Inheritance graph"></center>
<map name="Xapian_1_1CategorySelectMatchSpy__inherit__map">
<area shape="rect" href="classXapian_1_1ValueCountMatchSpy.html" title="Class for counting the frequencies of values in the matching documents." alt="" coords="17,80,239,107"><area shape="rect" href="classXapian_1_1MatchDecider.html" title="Base class for matcher decision functor." alt="" coords="43,6,213,32"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for Xapian::CategorySelectMatchSpy:<p><center><img src="classXapian_1_1CategorySelectMatchSpy__coll__graph.png" border="0" usemap="#Xapian_1_1CategorySelectMatchSpy__coll__map" alt="Collaboration graph"></center>
<map name="Xapian_1_1CategorySelectMatchSpy__coll__map">
<area shape="rect" href="classXapian_1_1ValueCountMatchSpy.html" title="Class for counting the frequencies of values in the matching documents." alt="" coords="17,80,239,107"><area shape="rect" href="classXapian_1_1MatchDecider.html" title="Base class for matcher decision functor." alt="" coords="43,6,213,32"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classXapian_1_1CategorySelectMatchSpy-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1CategorySelectMatchSpy.html#ba119f6d56bb65d2b9ca85aefc1a4750">CategorySelectMatchSpy</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor.  <a href="#ba119f6d56bb65d2b9ca85aefc1a4750"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1CategorySelectMatchSpy.html#ab0897590cffa8044fc12c10081966ab">CategorySelectMatchSpy</a> (<a class="el" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10">Xapian::valueno</a> valno)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct a MatchSpy which classifies matching documents based on the values in a particular slot.  <a href="#ab0897590cffa8044fc12c10081966ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1CategorySelectMatchSpy.html#7dd580e35c3c70b5ebee9b18f82ad040">score_categorisation</a> (<a class="el" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10">Xapian::valueno</a> valno, double desired_no_of_categories=0.0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a score reflecting how "good" a categorisation is.  <a href="#7dd580e35c3c70b5ebee9b18f82ad040"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1CategorySelectMatchSpy.html#c5ed054b0456e5218bbe8b7c9fbb841f">build_numeric_ranges</a> (<a class="el" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10">Xapian::valueno</a> valno, size_t max_ranges)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Turn a category containing sort-encoded numeric values into a set of ranges.  <a href="#c5ed054b0456e5218bbe8b7c9fbb841f"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
MatchSpy for classifying matching documents by their values. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ba119f6d56bb65d2b9ca85aefc1a4750"></a><!-- doxytag: member="Xapian::CategorySelectMatchSpy::CategorySelectMatchSpy" ref="ba119f6d56bb65d2b9ca85aefc1a4750" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Xapian::CategorySelectMatchSpy::CategorySelectMatchSpy           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default constructor. 
<p>

</div>
</div><p>
<a class="anchor" name="ab0897590cffa8044fc12c10081966ab"></a><!-- doxytag: member="Xapian::CategorySelectMatchSpy::CategorySelectMatchSpy" ref="ab0897590cffa8044fc12c10081966ab" args="(Xapian::valueno valno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Xapian::CategorySelectMatchSpy::CategorySelectMatchSpy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10">Xapian::valueno</a>&nbsp;</td>
          <td class="paramname"> <em>valno</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a MatchSpy which classifies matching documents based on the values in a particular slot. 
<p>
Further slots can be added by calling <em><a class="el" href="classXapian_1_1ValueCountMatchSpy.html#6510d6711037a61e103e0166300dc129" title="Add a slot number to count values in.">add_slot()</a></em>. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="7dd580e35c3c70b5ebee9b18f82ad040"></a><!-- doxytag: member="Xapian::CategorySelectMatchSpy::score_categorisation" ref="7dd580e35c3c70b5ebee9b18f82ad040" args="(Xapian::valueno valno, double desired_no_of_categories=0.0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Xapian::CategorySelectMatchSpy::score_categorisation           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10">Xapian::valueno</a>&nbsp;</td>
          <td class="paramname"> <em>valno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>desired_no_of_categories</em> = <code>0.0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a score reflecting how "good" a categorisation is. 
<p>
If you don't want to show a poor categorisation, or have multiple categories and only space in your user interface to show a few, you want to be able to decide how "good" a categorisation is. We define a good categorisation as one which offers a fairly even split, and (optionally) about a specified number of options.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valno</em>&nbsp;</td><td>Value number to look at the categorisation for.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>desired_no_of_categories</em>&nbsp;</td><td>The desired number of categories - this is a floating point value, so you can ask for 5.5 if you'd like "about 5 or 6 categories". The default is to desire the number of categories that there actually are, so the score then only reflects how even the split is.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A score for the categorisation for value <em>valno</em> - lower is better, with a perfectly even split across the right number of categories scoring 0. </dd></dl>

</div>
</div><p>
<a class="anchor" name="c5ed054b0456e5218bbe8b7c9fbb841f"></a><!-- doxytag: member="Xapian::CategorySelectMatchSpy::build_numeric_ranges" ref="c5ed054b0456e5218bbe8b7c9fbb841f" args="(Xapian::valueno valno, size_t max_ranges)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Xapian::CategorySelectMatchSpy::build_numeric_ranges           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10">Xapian::valueno</a>&nbsp;</td>
          <td class="paramname"> <em>valno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max_ranges</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Turn a category containing sort-encoded numeric values into a set of ranges. 
<p>
For "continuous" values (such as price, height, weight, etc), there will usually be too many different values to offer the user, and the user won't want to restrict to an exact value anyway.<p>
This method produces a set of ranges for a particular value number. The ranges replace the category data for value <em>valno</em> - the keys are either empty (entry for "no value set"), &lt;= 9 bytes long (a singleton encoded value), or &gt; 9 bytes long (the first 9 bytes are the encoded range start, the rest the encoded range end).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valno</em>&nbsp;</td><td>Value number to produce ranges for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_ranges</em>&nbsp;</td><td>Group into at most this many ranges.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if ranges could be built; false if not (e.g. all values the same, no values set, or other reasons). </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>include/xapian/<a class="el" href="matchspy_8h-source.html">matchspy.h</a></ul>
<hr>
<address><small>
Documentation for Xapian (version 1.0.11).<br>
Generated on 15 Mar 2009 by
<a href="http://www.doxygen.org/">Doxygen 1.5.2</a>.
</small></address>
</body>
</html>
