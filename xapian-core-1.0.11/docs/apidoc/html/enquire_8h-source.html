<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Xapian: API Documentation: xapian-core: include/xapian/enquire.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>include/xapian/enquire.h</h1><a href="enquire_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="comment">/* Copyright 1999,2000,2001 BrightStation PLC</span>
<a name="l00005"></a>00005 <span class="comment"> * Copyright 2001,2002 Ananova Ltd</span>
<a name="l00006"></a>00006 <span class="comment"> * Copyright 2002,2003,2004,2005,2006,2007,2009 Olly Betts</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00009"></a>00009 <span class="comment"> * modify it under the terms of the GNU General Public License as</span>
<a name="l00010"></a>00010 <span class="comment"> * published by the Free Software Foundation; either version 2 of the</span>
<a name="l00011"></a>00011 <span class="comment"> * License, or (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00016"></a>00016 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00019"></a>00019 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301</span>
<a name="l00021"></a>00021 <span class="comment"> * USA</span>
<a name="l00022"></a>00022 <span class="comment"> */</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#ifndef XAPIAN_INCLUDED_ENQUIRE_H</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#define XAPIAN_INCLUDED_ENQUIRE_H</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;xapian/base.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;xapian/deprecated.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="sorter_8h.html" title="Build sort keys for MSet ordering.">xapian/sorter.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="types_8h.html" title="typedefs for Xapian">xapian/types.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="termiterator_8h.html" title="Classes for iterating through term lists.">xapian/termiterator.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;xapian/visibility.h&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="keyword">namespace </span>Xapian {
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="keyword">class </span>Database;
<a name="l00039"></a>00039 <span class="keyword">class </span>Document;
<a name="l00040"></a>00040 <span class="keyword">class </span>ErrorHandler;
<a name="l00041"></a>00041 <span class="keyword">class </span>ExpandDecider;
<a name="l00042"></a>00042 <span class="keyword">class </span>MSetIterator;
<a name="l00043"></a>00043 <span class="keyword">class </span>Query;
<a name="l00044"></a>00044 <span class="keyword">class </span>Weight;
<a name="l00045"></a>00045 
<a name="l00049"></a><a class="code" href="classXapian_1_1MSet.html">00049</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT MSet {
<a name="l00050"></a>00050     <span class="keyword">public</span>:
<a name="l00051"></a>00051         <span class="keyword">class </span>Internal;
<a name="l00053"></a>00053         Xapian::Internal::RefCntPtr&lt;Internal&gt; <span class="keyword">internal</span>;
<a name="l00054"></a>00054 
<a name="l00056"></a>00056         <span class="keyword">explicit</span> MSet(MSet::Internal * internal_);
<a name="l00057"></a>00057 
<a name="l00059"></a>00059         MSet();
<a name="l00060"></a>00060 
<a name="l00062"></a>00062         ~MSet();
<a name="l00063"></a>00063 
<a name="l00065"></a>00065         MSet(<span class="keyword">const</span> MSet &amp; other);
<a name="l00066"></a>00066 
<a name="l00068"></a>00068         <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> MSet &amp;other);
<a name="l00069"></a>00069 
<a name="l00085"></a>00085         <span class="keywordtype">void</span> fetch(<span class="keyword">const</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> &amp;begin, <span class="keyword">const</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> &amp;end) <span class="keyword">const</span>;
<a name="l00086"></a>00086 
<a name="l00089"></a>00089         <span class="keywordtype">void</span> fetch(<span class="keyword">const</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> &amp;item) <span class="keyword">const</span>;
<a name="l00090"></a>00090 
<a name="l00093"></a>00093         <span class="keywordtype">void</span> fetch() <span class="keyword">const</span>;
<a name="l00094"></a>00094 
<a name="l00099"></a>00099         <a class="code" href="namespaceXapian.html#86533cd9df01e80d23d758d74c7e1150" title="The percentage score for a document in an MSet.">Xapian::percent</a> convert_to_percent(<a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> wt) <span class="keyword">const</span>;
<a name="l00100"></a>00100 
<a name="l00102"></a>00102         <a class="code" href="namespaceXapian.html#86533cd9df01e80d23d758d74c7e1150" title="The percentage score for a document in an MSet.">Xapian::percent</a> convert_to_percent(<span class="keyword">const</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> &amp;it) <span class="keyword">const</span>;
<a name="l00103"></a>00103 
<a name="l00111"></a>00111         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> get_termfreq(<span class="keyword">const</span> std::string &amp;tname) <span class="keyword">const</span>;
<a name="l00112"></a>00112 
<a name="l00120"></a>00120         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_termweight(<span class="keyword">const</span> std::string &amp;tname) <span class="keyword">const</span>;
<a name="l00121"></a>00121 
<a name="l00129"></a>00129         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> get_firstitem() <span class="keyword">const</span>;
<a name="l00130"></a>00130 
<a name="l00140"></a>00140         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> get_matches_lower_bound() <span class="keyword">const</span>;
<a name="l00141"></a>00141 
<a name="l00154"></a>00154         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> get_matches_estimated() <span class="keyword">const</span>;
<a name="l00155"></a>00155 
<a name="l00165"></a>00165         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> get_matches_upper_bound() <span class="keyword">const</span>;
<a name="l00166"></a>00166 
<a name="l00173"></a>00173         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_max_possible() <span class="keyword">const</span>;
<a name="l00174"></a>00174 
<a name="l00188"></a>00188         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_max_attained() <span class="keyword">const</span>;
<a name="l00189"></a>00189 
<a name="l00191"></a>00191         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> size() <span class="keyword">const</span>;
<a name="l00192"></a>00192 
<a name="l00194"></a><a class="code" href="classXapian_1_1MSet.html#223db21961c43d1d197a2bd8676bdf9f">00194</a>         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> max_size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size(); }
<a name="l00195"></a>00195 
<a name="l00197"></a>00197         <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l00198"></a>00198 
<a name="l00200"></a>00200         <span class="keywordtype">void</span> swap(MSet &amp; other);
<a name="l00201"></a>00201 
<a name="l00203"></a>00203         <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> begin() <span class="keyword">const</span>;
<a name="l00204"></a>00204 
<a name="l00206"></a>00206         <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> end() <span class="keyword">const</span>;
<a name="l00207"></a>00207 
<a name="l00209"></a>00209         <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> back() <span class="keyword">const</span>;
<a name="l00210"></a>00210 
<a name="l00220"></a>00220         <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> operator[](<a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> i) <span class="keyword">const</span>;
<a name="l00221"></a>00221 
<a name="l00223"></a>00223 
<a name="l00224"></a><a class="code" href="classXapian_1_1MSet.html#94b032fd6e1f553c3ae55426e060ef9d">00224</a>         <span class="keyword">typedef</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">value_type</a>; <span class="comment">// FIXME: not assignable...</span>
<a name="l00225"></a>00225         <span class="keyword">typedef</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">iterator</a>;
<a name="l00226"></a>00226         <span class="keyword">typedef</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">const_iterator</a>;
<a name="l00227"></a>00227         <span class="keyword">typedef</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> &amp; <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">reference</a>; <span class="comment">// Hmm</span>
<a name="l00228"></a>00228         <span class="keyword">typedef</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> &amp; <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">const_reference</a>;
<a name="l00229"></a>00229         <span class="keyword">typedef</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">MSetIterator</a> * <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">pointer</a>; <span class="comment">// Hmm</span>
<a name="l00230"></a>00230         <span class="keyword">typedef</span> <a class="code" href="namespaceXapian.html#c0b722c47eee1eeef923379778e3ae5e" title="A signed difference between two counts of documents.">Xapian::doccount_diff</a> difference_type;
<a name="l00231"></a>00231         <span class="keyword">typedef</span> <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> size_type;
<a name="l00233"></a>00233 
<a name="l00235"></a>00235         std::string get_description() <span class="keyword">const</span>;
<a name="l00236"></a>00236 };
<a name="l00237"></a>00237 
<a name="l00241"></a><a class="code" href="classXapian_1_1MSetIterator.html">00241</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT MSetIterator {
<a name="l00242"></a>00242     <span class="keyword">private</span>:
<a name="l00243"></a>00243         <span class="keyword">friend</span> <span class="keyword">class </span>MSet;
<a name="l00244"></a>00244         <span class="keyword">friend</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> MSetIterator &amp;a, <span class="keyword">const</span> MSetIterator &amp;b);
<a name="l00245"></a>00245         <span class="keyword">friend</span> <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> MSetIterator &amp;a, <span class="keyword">const</span> MSetIterator &amp;b);
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         MSetIterator(<a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> index_, <span class="keyword">const</span> MSet &amp; mset_)
<a name="l00248"></a>00248             : index(index_), mset(mset_) { }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> index;
<a name="l00251"></a>00251         MSet mset;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="keyword">public</span>:
<a name="l00257"></a><a class="code" href="classXapian_1_1MSetIterator.html#9263617f81bb0dd0dea0208d221ce806">00257</a>         MSetIterator() : index(0), mset() { }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         ~MSetIterator() { }
<a name="l00260"></a>00260 
<a name="l00262"></a><a class="code" href="classXapian_1_1MSetIterator.html#265c839e42cbe6e0eeda1e789b5acff2">00262</a>         MSetIterator(<span class="keyword">const</span> MSetIterator &amp;other) {
<a name="l00263"></a>00263             index = other.<a class="code" href="classXapian_1_1MSetIterator.html#44486878a9ae8e63cb92ab8c93373505">index</a>;
<a name="l00264"></a>00264             mset = other.<a class="code" href="classXapian_1_1MSetIterator.html#06f244e860c4fb97892121419d9ef1c0">mset</a>;
<a name="l00265"></a>00265         }
<a name="l00266"></a>00266 
<a name="l00268"></a><a class="code" href="classXapian_1_1MSetIterator.html#e62d849ba23857166466844b4f9670d3">00268</a>         <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> MSetIterator &amp;other) {
<a name="l00269"></a>00269             index = other.<a class="code" href="classXapian_1_1MSetIterator.html#44486878a9ae8e63cb92ab8c93373505">index</a>;
<a name="l00270"></a>00270             mset = other.<a class="code" href="classXapian_1_1MSetIterator.html#06f244e860c4fb97892121419d9ef1c0">mset</a>;
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272 
<a name="l00274"></a><a class="code" href="classXapian_1_1MSetIterator.html#6c8ff9a35a6623c2064dd1c0a34de508">00274</a>         MSetIterator &amp; operator++() {
<a name="l00275"></a>00275             ++index;
<a name="l00276"></a>00276             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00277"></a>00277         }
<a name="l00278"></a>00278 
<a name="l00280"></a><a class="code" href="classXapian_1_1MSetIterator.html#69d34ecc34725c42f26b7373e978c280">00280</a>         MSetIterator operator++(<span class="keywordtype">int</span>) {
<a name="l00281"></a>00281             MSetIterator tmp = *<span class="keyword">this</span>;
<a name="l00282"></a>00282             ++index;
<a name="l00283"></a>00283             <span class="keywordflow">return</span> tmp;
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285 
<a name="l00287"></a><a class="code" href="classXapian_1_1MSetIterator.html#f38a10bd89efb3a4e72c42ef414e5a19">00287</a>         MSetIterator &amp; operator--() {
<a name="l00288"></a>00288             --index;
<a name="l00289"></a>00289             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00290"></a>00290         }
<a name="l00291"></a>00291 
<a name="l00293"></a><a class="code" href="classXapian_1_1MSetIterator.html#1feed20e52f960fa8fc260ac9fdb0d34">00293</a>         MSetIterator operator--(<span class="keywordtype">int</span>) {
<a name="l00294"></a>00294             MSetIterator tmp = *<span class="keyword">this</span>;
<a name="l00295"></a>00295             --index;
<a name="l00296"></a>00296             <span class="keywordflow">return</span> tmp;
<a name="l00297"></a>00297         }
<a name="l00298"></a>00298 
<a name="l00300"></a>00300         <a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> operator*() <span class="keyword">const</span>;
<a name="l00301"></a>00301 
<a name="l00318"></a>00318         <a class="code" href="classXapian_1_1Document.html" title="A document in the database - holds data, values, terms, and postings.">Xapian::Document</a> get_document() <span class="keyword">const</span>;
<a name="l00319"></a>00319 
<a name="l00326"></a><a class="code" href="classXapian_1_1MSetIterator.html#efc3eb25d48a7fb0c242960181660f86">00326</a>         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> get_rank()<span class="keyword"> const </span>{
<a name="l00327"></a>00327             <span class="keywordflow">return</span> mset.get_firstitem() + index;
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329 
<a name="l00331"></a>00331         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_weight() <span class="keyword">const</span>;
<a name="l00332"></a>00332 
<a name="l00335"></a>00335         std::string get_collapse_key() <span class="keyword">const</span>;
<a name="l00336"></a>00336 
<a name="l00353"></a>00353         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> get_collapse_count() <span class="keyword">const</span>;
<a name="l00354"></a>00354 
<a name="l00370"></a>00370         <a class="code" href="namespaceXapian.html#86533cd9df01e80d23d758d74c7e1150" title="The percentage score for a document in an MSet.">Xapian::percent</a> get_percent() <span class="keyword">const</span>;
<a name="l00371"></a>00371 
<a name="l00373"></a>00373         std::string get_description() <span class="keyword">const</span>;
<a name="l00374"></a>00374 
<a name="l00376"></a>00376 
<a name="l00377"></a><a class="code" href="classXapian_1_1MSetIterator.html#8464f17947d6254c01e5797d248c5a9e">00377</a>         <span class="keyword">typedef</span> std::bidirectional_iterator_tag iterator_category; <span class="comment">// FIXME: could enhance to be a randomaccess_iterator</span>
<a name="l00378"></a>00378         <span class="keyword">typedef</span> <a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> value_type;
<a name="l00379"></a>00379         <span class="keyword">typedef</span> <a class="code" href="namespaceXapian.html#c0b722c47eee1eeef923379778e3ae5e" title="A signed difference between two counts of documents.">Xapian::doccount_diff</a> difference_type;
<a name="l00380"></a>00380         <span class="keyword">typedef</span> <a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> * pointer;
<a name="l00381"></a>00381         <span class="keyword">typedef</span> <a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> &amp; reference;
<a name="l00383"></a>00383 };
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> MSetIterator &amp;a, <span class="keyword">const</span> MSetIterator &amp;b)
<a name="l00386"></a>00386 {
<a name="l00387"></a>00387     <span class="keywordflow">return</span> (a.<a class="code" href="classXapian_1_1MSetIterator.html#44486878a9ae8e63cb92ab8c93373505">index</a> == b.<a class="code" href="classXapian_1_1MSetIterator.html#44486878a9ae8e63cb92ab8c93373505">index</a>);
<a name="l00388"></a>00388 }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390 <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> MSetIterator &amp;a, <span class="keyword">const</span> MSetIterator &amp;b)
<a name="l00391"></a>00391 {
<a name="l00392"></a>00392     <span class="keywordflow">return</span> (a.index != b.index);
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="keyword">class </span>ESetIterator;
<a name="l00396"></a>00396 
<a name="l00401"></a><a class="code" href="classXapian_1_1ESet.html">00401</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT ESet {
<a name="l00402"></a>00402     <span class="keyword">public</span>:
<a name="l00403"></a>00403         <span class="keyword">class </span>Internal;
<a name="l00405"></a>00405         Xapian::Internal::RefCntPtr&lt;Internal&gt; <span class="keyword">internal</span>;
<a name="l00406"></a>00406 
<a name="l00408"></a>00408         ESet();
<a name="l00409"></a>00409 
<a name="l00411"></a>00411         ~ESet();
<a name="l00412"></a>00412 
<a name="l00414"></a>00414         ESet(<span class="keyword">const</span> ESet &amp; other);
<a name="l00415"></a>00415 
<a name="l00417"></a>00417         <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> ESet &amp;other);
<a name="l00418"></a>00418 
<a name="l00423"></a>00423         <a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> get_ebound() <span class="keyword">const</span>;
<a name="l00424"></a>00424 
<a name="l00426"></a>00426         <a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> size() <span class="keyword">const</span>;
<a name="l00427"></a>00427 
<a name="l00429"></a><a class="code" href="classXapian_1_1ESet.html#cbb95341846eea1cae721e7b22e3a997">00429</a>         <a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> max_size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> size(); }
<a name="l00430"></a>00430 
<a name="l00432"></a>00432         <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l00433"></a>00433 
<a name="l00435"></a>00435         <span class="keywordtype">void</span> swap(ESet &amp; other);
<a name="l00436"></a>00436 
<a name="l00438"></a>00438         <a class="code" href="classXapian_1_1ESetIterator.html" title="Iterate through terms in the ESet.">ESetIterator</a> begin() <span class="keyword">const</span>;
<a name="l00439"></a>00439 
<a name="l00441"></a>00441         <a class="code" href="classXapian_1_1ESetIterator.html" title="Iterate through terms in the ESet.">ESetIterator</a> end() <span class="keyword">const</span>;
<a name="l00442"></a>00442 
<a name="l00444"></a>00444         <a class="code" href="classXapian_1_1ESetIterator.html" title="Iterate through terms in the ESet.">ESetIterator</a> back() <span class="keyword">const</span>;
<a name="l00445"></a>00445 
<a name="l00447"></a>00447         <a class="code" href="classXapian_1_1ESetIterator.html" title="Iterate through terms in the ESet.">ESetIterator</a> operator[](<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> i) <span class="keyword">const</span>;
<a name="l00448"></a>00448 
<a name="l00450"></a>00450         std::string get_description() <span class="keyword">const</span>;
<a name="l00451"></a>00451 };
<a name="l00452"></a>00452 
<a name="l00454"></a><a class="code" href="classXapian_1_1ESetIterator.html">00454</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT ESetIterator {
<a name="l00455"></a>00455     <span class="keyword">private</span>:
<a name="l00456"></a>00456         <span class="keyword">friend</span> <span class="keyword">class </span>ESet;
<a name="l00457"></a>00457         <span class="keyword">friend</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> ESetIterator &amp;a, <span class="keyword">const</span> ESetIterator &amp;b);
<a name="l00458"></a>00458         <span class="keyword">friend</span> <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> ESetIterator &amp;a, <span class="keyword">const</span> ESetIterator &amp;b);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         ESetIterator(<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> index_, <span class="keyword">const</span> ESet &amp; eset_)
<a name="l00461"></a>00461             : index(index_), eset(eset_) { }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463         <a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> index;
<a name="l00464"></a>00464         ESet eset;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <span class="keyword">public</span>:
<a name="l00470"></a><a class="code" href="classXapian_1_1ESetIterator.html#835a56510580f41353b785821300339a">00470</a>         ESetIterator() : index(0), eset() { }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472         ~ESetIterator() { }
<a name="l00473"></a>00473 
<a name="l00475"></a><a class="code" href="classXapian_1_1ESetIterator.html#a47db737dc851c4738bed4ffcad463d8">00475</a>         ESetIterator(<span class="keyword">const</span> ESetIterator &amp;other) {
<a name="l00476"></a>00476             index = other.<a class="code" href="classXapian_1_1ESetIterator.html#28438b3b2db1a36f28aad81b446960a4">index</a>;
<a name="l00477"></a>00477             eset = other.<a class="code" href="classXapian_1_1ESetIterator.html#14611d6c8ce362f4b921709de468ea14">eset</a>;
<a name="l00478"></a>00478         }
<a name="l00479"></a>00479 
<a name="l00481"></a><a class="code" href="classXapian_1_1ESetIterator.html#7768160cc847da269a2352f1e634fd99">00481</a>         <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> ESetIterator &amp;other) {
<a name="l00482"></a>00482             index = other.<a class="code" href="classXapian_1_1ESetIterator.html#28438b3b2db1a36f28aad81b446960a4">index</a>;
<a name="l00483"></a>00483             eset = other.<a class="code" href="classXapian_1_1ESetIterator.html#14611d6c8ce362f4b921709de468ea14">eset</a>;
<a name="l00484"></a>00484         }
<a name="l00485"></a>00485 
<a name="l00487"></a><a class="code" href="classXapian_1_1ESetIterator.html#f712cd2c14b611bbf3c29aae1f748314">00487</a>         ESetIterator &amp; operator++() {
<a name="l00488"></a>00488             ++index;
<a name="l00489"></a>00489             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00490"></a>00490         }
<a name="l00491"></a>00491 
<a name="l00493"></a><a class="code" href="classXapian_1_1ESetIterator.html#d53eca0121b51732297718d5e65aa55a">00493</a>         ESetIterator operator++(<span class="keywordtype">int</span>) {
<a name="l00494"></a>00494             ESetIterator tmp = *<span class="keyword">this</span>;
<a name="l00495"></a>00495             ++index;
<a name="l00496"></a>00496             <span class="keywordflow">return</span> tmp;
<a name="l00497"></a>00497         }
<a name="l00498"></a>00498 
<a name="l00500"></a><a class="code" href="classXapian_1_1ESetIterator.html#b3045d7366a0b421a4e079ce1d6af912">00500</a>         ESetIterator &amp; operator--() {
<a name="l00501"></a>00501             --index;
<a name="l00502"></a>00502             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00503"></a>00503         }
<a name="l00504"></a>00504 
<a name="l00506"></a><a class="code" href="classXapian_1_1ESetIterator.html#c50207c6af311fcc21aa598543ae6f0d">00506</a>         ESetIterator operator--(<span class="keywordtype">int</span>) {
<a name="l00507"></a>00507             ESetIterator tmp = *<span class="keyword">this</span>;
<a name="l00508"></a>00508             --index;
<a name="l00509"></a>00509             <span class="keywordflow">return</span> tmp;
<a name="l00510"></a>00510         }
<a name="l00511"></a>00511 
<a name="l00513"></a>00513         <span class="keyword">const</span> std::string &amp; operator *() <span class="keyword">const</span>;
<a name="l00514"></a>00514 
<a name="l00516"></a>00516         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_weight() <span class="keyword">const</span>;
<a name="l00517"></a>00517 
<a name="l00519"></a>00519         std::string get_description() <span class="keyword">const</span>;
<a name="l00520"></a>00520 
<a name="l00522"></a>00522 
<a name="l00523"></a><a class="code" href="classXapian_1_1ESetIterator.html#57c315ac0fc056e91dbc92a82a57d028">00523</a>         <span class="keyword">typedef</span> std::bidirectional_iterator_tag iterator_category; <span class="comment">// FIXME: go for randomaccess_iterator!</span>
<a name="l00524"></a>00524         <span class="keyword">typedef</span> std::string value_type;
<a name="l00525"></a>00525         <span class="keyword">typedef</span> <a class="code" href="namespaceXapian.html#d2d5022b715dc424202f74eef3bdefc5" title="A signed difference between two counts of terms.">Xapian::termcount_diff</a> difference_type;
<a name="l00526"></a>00526         <span class="keyword">typedef</span> std::string * pointer;
<a name="l00527"></a>00527         <span class="keyword">typedef</span> std::string &amp; reference;
<a name="l00529"></a>00529 };
<a name="l00530"></a>00530 
<a name="l00531"></a>00531 <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> ESetIterator &amp;a, <span class="keyword">const</span> ESetIterator &amp;b)
<a name="l00532"></a>00532 {
<a name="l00533"></a>00533     <span class="keywordflow">return</span> (a.<a class="code" href="classXapian_1_1ESetIterator.html#28438b3b2db1a36f28aad81b446960a4">index</a> == b.<a class="code" href="classXapian_1_1ESetIterator.html#28438b3b2db1a36f28aad81b446960a4">index</a>);
<a name="l00534"></a>00534 }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> ESetIterator &amp;a, <span class="keyword">const</span> ESetIterator &amp;b)
<a name="l00537"></a>00537 {
<a name="l00538"></a>00538     <span class="keywordflow">return</span> (a.index != b.index);
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 
<a name="l00545"></a><a class="code" href="classXapian_1_1RSet.html">00545</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT RSet {
<a name="l00546"></a>00546     <span class="keyword">public</span>:
<a name="l00548"></a>00548         <span class="keyword">class </span>Internal;
<a name="l00549"></a>00549 
<a name="l00551"></a>00551         Xapian::Internal::RefCntPtr&lt;Internal&gt; <span class="keyword">internal</span>;
<a name="l00552"></a>00552 
<a name="l00554"></a>00554         RSet(<span class="keyword">const</span> RSet &amp;rset);
<a name="l00555"></a>00555 
<a name="l00557"></a>00557         <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> RSet &amp;rset);
<a name="l00558"></a>00558 
<a name="l00560"></a>00560         RSet();
<a name="l00561"></a>00561 
<a name="l00563"></a>00563         ~RSet();
<a name="l00564"></a>00564 
<a name="l00566"></a>00566         <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> size() <span class="keyword">const</span>;
<a name="l00567"></a>00567 
<a name="l00569"></a>00569         <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
<a name="l00570"></a>00570 
<a name="l00572"></a>00572         <span class="keywordtype">void</span> add_document(<a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> did);
<a name="l00573"></a>00573 
<a name="l00575"></a><a class="code" href="classXapian_1_1RSet.html#a3e5e3449d12cf4a31a3d412bcfe7e0d">00575</a>         <span class="keywordtype">void</span> add_document(<span class="keyword">const</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">Xapian::MSetIterator</a> &amp; i) { add_document(*i); }
<a name="l00576"></a>00576 
<a name="l00578"></a>00578         <span class="keywordtype">void</span> remove_document(<a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> did);
<a name="l00579"></a>00579 
<a name="l00581"></a><a class="code" href="classXapian_1_1RSet.html#681ee66eae3c60c6bcd467805f91fa8d">00581</a>         <span class="keywordtype">void</span> remove_document(<span class="keyword">const</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">Xapian::MSetIterator</a> &amp; i) { remove_document(*i); }
<a name="l00582"></a>00582 
<a name="l00584"></a>00584         <span class="keywordtype">bool</span> contains(<a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> did) <span class="keyword">const</span>;
<a name="l00585"></a>00585 
<a name="l00587"></a><a class="code" href="classXapian_1_1RSet.html#2f8cf628f5dfb0753f88e5f620a3a7b4">00587</a>         <span class="keywordtype">bool</span> contains(<span class="keyword">const</span> <a class="code" href="classXapian_1_1MSetIterator.html" title="An iterator pointing to items in an MSet.">Xapian::MSetIterator</a> &amp; i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> contains(*i); }
<a name="l00588"></a>00588 
<a name="l00590"></a>00590         std::string get_description() <span class="keyword">const</span>;
<a name="l00591"></a>00591 };
<a name="l00592"></a>00592 
<a name="l00595"></a><a class="code" href="classXapian_1_1MatchDecider.html">00595</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT MatchDecider {
<a name="l00596"></a>00596     <span class="keyword">public</span>:
<a name="l00602"></a>00602         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <a class="code" href="classXapian_1_1Document.html" title="A document in the database - holds data, values, terms, and postings.">Xapian::Document</a> &amp;doc) <span class="keyword">const</span> = 0;
<a name="l00603"></a>00603 
<a name="l00605"></a>00605         <span class="keyword">virtual</span> ~MatchDecider();
<a name="l00606"></a>00606 };
<a name="l00607"></a>00607 
<a name="l00618"></a><a class="code" href="classXapian_1_1Enquire.html">00618</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT Enquire {
<a name="l00619"></a>00619     <span class="keyword">public</span>:
<a name="l00621"></a>00621         Enquire(<span class="keyword">const</span> Enquire &amp; other);
<a name="l00622"></a>00622 
<a name="l00624"></a>00624         <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> Enquire &amp; other);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626         <span class="keyword">class </span>Internal;
<a name="l00628"></a>00628         Xapian::Internal::RefCntPtr&lt;Internal&gt; <span class="keyword">internal</span>;
<a name="l00629"></a>00629 
<a name="l00654"></a>00654         <span class="keyword">explicit</span> Enquire(<span class="keyword">const</span> <a class="code" href="classXapian_1_1Database.html" title="This class is used to access a database, or a group of databases.">Database</a> &amp;database, <a class="code" href="classXapian_1_1ErrorHandler.html" title="Decide if a Xapian::Error exception should be ignored.">ErrorHandler</a> * errorhandler_ = 0);
<a name="l00655"></a>00655 
<a name="l00658"></a>00658         ~Enquire();
<a name="l00659"></a>00659 
<a name="l00666"></a>00666         <span class="keywordtype">void</span> set_query(<span class="keyword">const</span> <a class="code" href="classXapian_1_1Query.html" title="Class representing a query.">Xapian::Query</a> &amp; query, <a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> qlen = 0);
<a name="l00667"></a>00667 
<a name="l00674"></a>00674         <span class="keyword">const</span> <a class="code" href="classXapian_1_1Query.html" title="Class representing a query.">Xapian::Query</a> &amp; get_query() <span class="keyword">const</span>;
<a name="l00675"></a>00675 
<a name="l00682"></a>00682         <span class="keywordtype">void</span> set_weighting_scheme(<span class="keyword">const</span> <a class="code" href="classXapian_1_1Weight.html" title="Abstract base class for weighting schemes.">Weight</a> &amp;weight_);
<a name="l00683"></a>00683 
<a name="l00710"></a>00710         <span class="keywordtype">void</span> set_collapse_key(<a class="code" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10" title="The number for a value slot in a document.">Xapian::valueno</a> collapse_key);
<a name="l00711"></a>00711 
<a name="l00712"></a>00712         <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00713"></a>00713             ASCENDING = 1,
<a name="l00714"></a>00714             DESCENDING = 0,
<a name="l00715"></a>00715             DONT_CARE = 2
<a name="l00716"></a>00716         } docid_order;
<a name="l00717"></a>00717 
<a name="l00741"></a>00741         <span class="keywordtype">void</span> set_docid_order(docid_order order);
<a name="l00742"></a>00742 
<a name="l00761"></a>00761         <span class="keywordtype">void</span> set_cutoff(<a class="code" href="namespaceXapian.html#86533cd9df01e80d23d758d74c7e1150" title="The percentage score for a document in an MSet.">Xapian::percent</a> percent_cutoff, <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> weight_cutoff = 0);
<a name="l00762"></a>00762 
<a name="l00767"></a>00767         <span class="keywordtype">void</span> set_sort_by_relevance();
<a name="l00768"></a>00768 
<a name="l00781"></a>00781         <span class="keywordtype">void</span> set_sort_by_value(<a class="code" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10" title="The number for a value slot in a document.">Xapian::valueno</a> sort_key, <span class="keywordtype">bool</span> reverse = <span class="keyword">true</span>);
<a name="l00782"></a>00782 
<a name="l00791"></a>00791         <span class="keywordtype">void</span> set_sort_by_key(<a class="code" href="classXapian_1_1Sorter.html" title="Virtual base class for sorter functor.">Xapian::Sorter</a> * sorter, <span class="keywordtype">bool</span> reverse = <span class="keyword">true</span>);
<a name="l00792"></a>00792 
<a name="l00806"></a>00806         <span class="keywordtype">void</span> set_sort_by_value_then_relevance(<a class="code" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10" title="The number for a value slot in a document.">Xapian::valueno</a> sort_key,
<a name="l00807"></a>00807                                               <span class="keywordtype">bool</span> reverse = <span class="keyword">true</span>);
<a name="l00808"></a>00808 
<a name="l00818"></a>00818         <span class="keywordtype">void</span> set_sort_by_key_then_relevance(<a class="code" href="classXapian_1_1Sorter.html" title="Virtual base class for sorter functor.">Xapian::Sorter</a> * sorter,
<a name="l00819"></a>00819                                             <span class="keywordtype">bool</span> reverse = <span class="keyword">true</span>);
<a name="l00820"></a>00820 
<a name="l00840"></a>00840         <span class="keywordtype">void</span> set_sort_by_relevance_then_value(<a class="code" href="namespaceXapian.html#e163c06958fa73cfac44a38c3eea5c10" title="The number for a value slot in a document.">Xapian::valueno</a> sort_key,
<a name="l00841"></a>00841                                               <span class="keywordtype">bool</span> reverse = <span class="keyword">true</span>);
<a name="l00842"></a>00842 
<a name="l00859"></a>00859         <span class="keywordtype">void</span> set_sort_by_relevance_then_key(<a class="code" href="classXapian_1_1Sorter.html" title="Virtual base class for sorter functor.">Xapian::Sorter</a> * sorter,
<a name="l00860"></a>00860                                             <span class="keywordtype">bool</span> reverse = <span class="keyword">true</span>);
<a name="l00861"></a>00861 
<a name="l00900"></a>00900         MSet get_mset(<a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> first, <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> maxitems,
<a name="l00901"></a>00901                       <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> checkatleast = 0,
<a name="l00902"></a>00902                       <span class="keyword">const</span> RSet * omrset = 0,
<a name="l00903"></a>00903                       <span class="keyword">const</span> MatchDecider * mdecider = 0) <span class="keyword">const</span>;
<a name="l00904"></a>00904         MSet get_mset(<a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> first, <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> maxitems,
<a name="l00905"></a>00905                       <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> checkatleast,
<a name="l00906"></a>00906                       <span class="keyword">const</span> RSet * omrset,
<a name="l00907"></a>00907                       <span class="keyword">const</span> MatchDecider * mdecider,
<a name="l00908"></a>00908                       <span class="keyword">const</span> MatchDecider * matchspy) <span class="keyword">const</span>;
<a name="l00909"></a>00909         MSet get_mset(<a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> first, <a class="code" href="namespaceXapian.html#44d2c93635cd10ee7d06a8d776f032cf" title="A count of documents.">Xapian::doccount</a> maxitems,
<a name="l00910"></a>00910                       <span class="keyword">const</span> RSet * omrset,
<a name="l00911"></a>00911                       <span class="keyword">const</span> MatchDecider * mdecider = 0)<span class="keyword"> const </span>{
<a name="l00912"></a>00912             <span class="keywordflow">return</span> get_mset(first, maxitems, 0, omrset, mdecider);
<a name="l00913"></a>00913         }
<a name="l00914"></a>00914 
<a name="l00915"></a>00915         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> INCLUDE_QUERY_TERMS = 1;
<a name="l00916"></a>00916         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> USE_EXACT_TERMFREQ = 2;
<a name="l00917"></a>00917 <span class="preprocessor">#ifndef _MSC_VER</span>
<a name="l00919"></a>00919 <span class="preprocessor">        XAPIAN_DEPRECATED(static const int include_query_terms) = 1;</span>
<a name="l00921"></a>00921 <span class="preprocessor">        XAPIAN_DEPRECATED(static const int use_exact_termfreq) = 2;</span>
<a name="l00922"></a>00922 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00923"></a>00923 <span class="preprocessor"></span>        <span class="comment">// Work around MSVC stupidity (you get a warning for deprecating a</span>
<a name="l00924"></a>00924         <span class="comment">// declaration).</span>
<a name="l00925"></a>00925         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> include_query_terms = 1;
<a name="l00926"></a>00926         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> use_exact_termfreq = 2;
<a name="l00927"></a>00927 <span class="preprocessor">#pragma deprecated("Xapian::Enquire::include_query_terms", "Xapian::Enquire::use_exact_termfreq")</span>
<a name="l00928"></a>00928 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00929"></a>00929 <span class="preprocessor"></span>
<a name="l00952"></a>00952         ESet get_eset(<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> maxitems,
<a name="l00953"></a>00953                         <span class="keyword">const</span> RSet &amp; omrset,
<a name="l00954"></a>00954                         <span class="keywordtype">int</span> flags = 0,
<a name="l00955"></a>00955                         <span class="keywordtype">double</span> k = 1.0,
<a name="l00956"></a>00956                         <span class="keyword">const</span> <a class="code" href="classXapian_1_1ExpandDecider.html" title="Virtual base class for expand decider functor.">Xapian::ExpandDecider</a> * edecider = 0) <span class="keyword">const</span>;
<a name="l00957"></a>00957 
<a name="l00971"></a><a class="code" href="classXapian_1_1Enquire.html#2b703053e9004951e9bd9e280321973b">00971</a>         <span class="keyword">inline</span> ESet get_eset(<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> maxitems, <span class="keyword">const</span> RSet &amp; omrset,
<a name="l00972"></a>00972                                <span class="keyword">const</span> <a class="code" href="classXapian_1_1ExpandDecider.html" title="Virtual base class for expand decider functor.">Xapian::ExpandDecider</a> * edecider)<span class="keyword"> const </span>{
<a name="l00973"></a>00973             <span class="keywordflow">return</span> get_eset(maxitems, omrset, 0, 1.0, edecider);
<a name="l00974"></a>00974         }
<a name="l00975"></a>00975 
<a name="l01004"></a>01004         <a class="code" href="classXapian_1_1TermIterator.html" title="An iterator pointing to items in a list of terms.">TermIterator</a> get_matching_terms_begin(<a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> did) <span class="keyword">const</span>;
<a name="l01005"></a>01005 
<a name="l01007"></a><a class="code" href="classXapian_1_1Enquire.html#18942dc1833a9e06bc0106cbe4c2a304">01007</a>         <a class="code" href="classXapian_1_1TermIterator.html" title="An iterator pointing to items in a list of terms.">TermIterator</a> get_matching_terms_end(<a class="code" href="namespaceXapian.html#d8d873ad5830cff0b4bbd89d7da45d15" title="A unique identifier for a document.">Xapian::docid</a> <span class="comment">/*did*/</span>)<span class="keyword"> const </span>{
<a name="l01008"></a>01008             <span class="keywordflow">return</span> <a class="code" href="classXapian_1_1TermIterator.html" title="An iterator pointing to items in a list of terms.">TermIterator</a>(NULL);
<a name="l01009"></a>01009         }
<a name="l01010"></a>01010 
<a name="l01033"></a>01033         <a class="code" href="classXapian_1_1TermIterator.html" title="An iterator pointing to items in a list of terms.">TermIterator</a> get_matching_terms_begin(<span class="keyword">const</span> MSetIterator &amp;it) <span class="keyword">const</span>;
<a name="l01034"></a>01034 
<a name="l01036"></a><a class="code" href="classXapian_1_1Enquire.html#409f4478bab5d7566e416505a9f03b49">01036</a>         <a class="code" href="classXapian_1_1TermIterator.html" title="An iterator pointing to items in a list of terms.">TermIterator</a> get_matching_terms_end(<span class="keyword">const</span> MSetIterator &amp;<span class="comment">/*it*/</span>)<span class="keyword"> const </span>{
<a name="l01037"></a>01037             <span class="keywordflow">return</span> <a class="code" href="classXapian_1_1TermIterator.html" title="An iterator pointing to items in a list of terms.">TermIterator</a>(NULL);
<a name="l01038"></a>01038         }
<a name="l01039"></a>01039 
<a name="l01052"></a>01052         <a class="code" href="namespaceXapian.html#fa82b768fb54176d5f475947a2fffbc4" title="For compatibility with Xapian 0.9.5 and earlier.">XAPIAN_DEPRECATED</a>(
<a name="l01053"></a>01053         <span class="keywordtype">void</span> register_match_decider(<span class="keyword">const</span> std::string &amp;name,
<a name="l01054"></a>01054                                     <span class="keyword">const</span> MatchDecider *mdecider = NULL));
<a name="l01055"></a>01055 
<a name="l01057"></a>01057         std::string get_description() <span class="keyword">const</span>;
<a name="l01058"></a>01058 };
<a name="l01059"></a>01059 
<a name="l01060"></a>01060 }
<a name="l01061"></a>01061 
<a name="l01062"></a>01062 <span class="keyword">class </span>RemoteServer;
<a name="l01063"></a>01063 <span class="keyword">class </span>ScaleWeight;
<a name="l01064"></a>01064 
<a name="l01065"></a>01065 <span class="keyword">namespace </span>Xapian {
<a name="l01066"></a>01066 
<a name="l01068"></a><a class="code" href="classXapian_1_1Weight.html">01068</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT Weight {
<a name="l01069"></a>01069     <span class="keyword">friend</span> <span class="keyword">class </span>Enquire; <span class="comment">// So Enquire can clone us</span>
<a name="l01070"></a>01070     <span class="keyword">friend</span> class ::RemoteServer; <span class="comment">// So RemoteServer can clone us - FIXME</span>
<a name="l01071"></a>01071     <span class="keyword">friend</span> class ::ScaleWeight;
<a name="l01072"></a>01072     <span class="keyword">public</span>:
<a name="l01073"></a>01073         <span class="keyword">class </span>Internal;
<a name="l01074"></a>01074     <span class="keyword">protected</span>:
<a name="l01075"></a>01075         Weight(<span class="keyword">const</span> Weight &amp;);
<a name="l01076"></a>01076     <span class="keyword">private</span>:
<a name="l01077"></a>01077         <span class="keywordtype">void</span> operator=(Weight &amp;);
<a name="l01078"></a>01078 
<a name="l01088"></a>01088         <span class="keyword">virtual</span> Weight * clone() <span class="keyword">const</span> = 0;
<a name="l01089"></a>01089 
<a name="l01090"></a>01090     <span class="keyword">protected</span>:
<a name="l01091"></a>01091         <span class="keyword">const</span> Internal * <span class="keyword">internal</span>; <span class="comment">// Weight::Internal == Stats</span>
<a name="l01092"></a>01092         <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> querysize;
<a name="l01093"></a>01093         <a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> wqf;
<a name="l01094"></a>01094         std::string tname;
<a name="l01095"></a>01095 
<a name="l01096"></a>01096     <span class="keyword">public</span>:
<a name="l01097"></a>01097         <span class="comment">// FIXME:1.1: initialise internal to NULL here</span>
<a name="l01098"></a>01098         Weight() { }
<a name="l01099"></a>01099         <span class="keyword">virtual</span> ~Weight();
<a name="l01100"></a>01100 
<a name="l01113"></a>01113         Weight * create(<span class="keyword">const</span> Internal * internal_, <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> querysize_,
<a name="l01114"></a>01114                         <a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> wqf_, <span class="keyword">const</span> std::string &amp; tname_) <span class="keyword">const</span>;
<a name="l01115"></a>01115 
<a name="l01120"></a>01120         <span class="keyword">virtual</span> std::string name() <span class="keyword">const</span> = 0;
<a name="l01121"></a>01121 
<a name="l01123"></a>01123         <span class="keyword">virtual</span> std::string serialise() <span class="keyword">const</span> = 0;
<a name="l01124"></a>01124 
<a name="l01126"></a>01126         <span class="keyword">virtual</span> Weight * unserialise(<span class="keyword">const</span> std::string &amp;s) <span class="keyword">const</span> = 0;
<a name="l01127"></a>01127 
<a name="l01135"></a>01135         <span class="keyword">virtual</span> <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumpart(<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> wdf,
<a name="l01136"></a>01136                                       <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span> = 0;
<a name="l01137"></a>01137 
<a name="l01143"></a>01143         <span class="keyword">virtual</span> <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxpart() <span class="keyword">const</span> = 0;
<a name="l01144"></a>01144 
<a name="l01153"></a>01153         <span class="keyword">virtual</span> <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumextra(<a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span> = 0;
<a name="l01154"></a>01154 
<a name="l01158"></a>01158         <span class="keyword">virtual</span> <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxextra() <span class="keyword">const</span> = 0;
<a name="l01159"></a>01159 
<a name="l01161"></a>01161         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> get_sumpart_needs_doclength() <span class="keyword">const</span>; <span class="comment">/* { return true; } */</span>
<a name="l01162"></a>01162 };
<a name="l01163"></a>01163 
<a name="l01165"></a><a class="code" href="classXapian_1_1BoolWeight.html">01165</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT BoolWeight : <span class="keyword">public</span> Weight {
<a name="l01166"></a>01166     <span class="keyword">public</span>:
<a name="l01167"></a>01167         BoolWeight * clone() <span class="keyword">const</span>;
<a name="l01168"></a>01168         BoolWeight() { }
<a name="l01169"></a>01169         ~BoolWeight();
<a name="l01170"></a>01170         std::string name() <span class="keyword">const</span>;
<a name="l01171"></a>01171         std::string serialise() <span class="keyword">const</span>;
<a name="l01172"></a>01172         BoolWeight * unserialise(<span class="keyword">const</span> std::string &amp; s) <span class="keyword">const</span>;
<a name="l01173"></a>01173         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumpart(<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> wdf, <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span>;
<a name="l01174"></a>01174         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxpart() <span class="keyword">const</span>;
<a name="l01175"></a>01175 
<a name="l01176"></a>01176         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumextra(<a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span>;
<a name="l01177"></a>01177         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxextra() <span class="keyword">const</span>;
<a name="l01178"></a>01178 
<a name="l01179"></a>01179         <span class="keywordtype">bool</span> get_sumpart_needs_doclength() <span class="keyword">const</span>;
<a name="l01180"></a>01180 };
<a name="l01181"></a>01181 
<a name="l01194"></a><a class="code" href="classXapian_1_1BM25Weight.html">01194</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT BM25Weight : <span class="keyword">public</span> Weight {
<a name="l01195"></a>01195     <span class="keyword">private</span>:
<a name="l01196"></a>01196         <span class="keyword">mutable</span> <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> termweight;
<a name="l01197"></a>01197         <span class="keyword">mutable</span> <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> lenpart;
<a name="l01198"></a>01198 
<a name="l01199"></a>01199         <span class="keywordtype">double</span> k1, k2, k3, b;
<a name="l01200"></a>01200         <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> min_normlen;
<a name="l01201"></a>01201 
<a name="l01202"></a>01202         <span class="keyword">mutable</span> <span class="keywordtype">bool</span> weight_calculated;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204         <span class="keywordtype">void</span> calc_termweight() <span class="keyword">const</span>;
<a name="l01205"></a>01205 
<a name="l01206"></a>01206     <span class="keyword">public</span>:
<a name="l01225"></a><a class="code" href="classXapian_1_1BM25Weight.html#58aa8ee25f7e8309de1655d83347560a">01225</a>         BM25Weight(<span class="keywordtype">double</span> k1_, <span class="keywordtype">double</span> k2_, <span class="keywordtype">double</span> k3_, <span class="keywordtype">double</span> b_,
<a name="l01226"></a>01226                    <span class="keywordtype">double</span> min_normlen_)
<a name="l01227"></a>01227                 : k1(k1_), k2(k2_), k3(k3_), b(b_), min_normlen(min_normlen_),
<a name="l01228"></a>01228                   weight_calculated(false)
<a name="l01229"></a>01229         {
<a name="l01230"></a>01230             <span class="keywordflow">if</span> (k1 &lt; 0) k1 = 0;
<a name="l01231"></a>01231             <span class="keywordflow">if</span> (k2 &lt; 0) k2 = 0;
<a name="l01232"></a>01232             <span class="keywordflow">if</span> (k3 &lt; 0) k3 = 0;
<a name="l01233"></a>01233             <span class="keywordflow">if</span> (b &lt; 0) b = 0; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (b &gt; 1) b = 1;
<a name="l01234"></a>01234         }
<a name="l01235"></a>01235         BM25Weight() : k1(1), k2(0), k3(1), b(0.5), min_normlen(0.5),
<a name="l01236"></a>01236                        weight_calculated(false) { }
<a name="l01237"></a>01237 
<a name="l01238"></a>01238         BM25Weight * clone() <span class="keyword">const</span>;
<a name="l01239"></a>01239         ~BM25Weight() { }
<a name="l01240"></a>01240         std::string name() <span class="keyword">const</span>;
<a name="l01241"></a>01241         std::string serialise() <span class="keyword">const</span>;
<a name="l01242"></a>01242         BM25Weight * unserialise(<span class="keyword">const</span> std::string &amp; s) <span class="keyword">const</span>;
<a name="l01243"></a>01243         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumpart(<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> wdf, <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span>;
<a name="l01244"></a>01244         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxpart() <span class="keyword">const</span>;
<a name="l01245"></a>01245 
<a name="l01246"></a>01246         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumextra(<a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span>;
<a name="l01247"></a>01247         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxextra() <span class="keyword">const</span>;
<a name="l01248"></a>01248 
<a name="l01249"></a>01249         <span class="keywordtype">bool</span> get_sumpart_needs_doclength() <span class="keyword">const</span>;
<a name="l01250"></a>01250 };
<a name="l01251"></a>01251 
<a name="l01269"></a><a class="code" href="classXapian_1_1TradWeight.html">01269</a> <span class="keyword">class </span>XAPIAN_VISIBILITY_DEFAULT TradWeight : <span class="keyword">public</span> Weight {
<a name="l01270"></a>01270     <span class="keyword">private</span>:
<a name="l01271"></a>01271         <span class="keyword">mutable</span> <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> termweight;
<a name="l01272"></a>01272         <span class="keyword">mutable</span> <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> lenpart;
<a name="l01273"></a>01273 
<a name="l01274"></a>01274         <span class="keywordtype">double</span> param_k;
<a name="l01275"></a>01275 
<a name="l01276"></a>01276         <span class="keyword">mutable</span> <span class="keywordtype">bool</span> weight_calculated;
<a name="l01277"></a>01277 
<a name="l01278"></a>01278         <span class="keywordtype">void</span> calc_termweight() <span class="keyword">const</span>;
<a name="l01279"></a>01279 
<a name="l01280"></a>01280     <span class="keyword">public</span>:
<a name="l01288"></a><a class="code" href="classXapian_1_1TradWeight.html#c4dc8e4d276ea29d4361984a91127bf6">01288</a>         <span class="keyword">explicit</span> TradWeight(<span class="keywordtype">double</span> k) : param_k(k), weight_calculated(false) {
<a name="l01289"></a>01289             <span class="keywordflow">if</span> (param_k &lt; 0) param_k = 0;
<a name="l01290"></a>01290         }
<a name="l01291"></a>01291 
<a name="l01292"></a>01292         TradWeight() : param_k(1.0), weight_calculated(false) { }
<a name="l01293"></a>01293 
<a name="l01294"></a>01294         TradWeight * clone() <span class="keyword">const</span>;
<a name="l01295"></a>01295         ~TradWeight() { }
<a name="l01296"></a>01296         std::string name() <span class="keyword">const</span>;
<a name="l01297"></a>01297         std::string serialise() <span class="keyword">const</span>;
<a name="l01298"></a>01298         TradWeight * unserialise(<span class="keyword">const</span> std::string &amp; s) <span class="keyword">const</span>;
<a name="l01299"></a>01299 
<a name="l01300"></a>01300         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumpart(<a class="code" href="namespaceXapian.html#3261017447607738e49eae6a2a4f5eec" title="A counts of terms.">Xapian::termcount</a> wdf, <a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span>;
<a name="l01301"></a>01301         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxpart() <span class="keyword">const</span>;
<a name="l01302"></a>01302 
<a name="l01303"></a>01303         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_sumextra(<a class="code" href="namespaceXapian.html#6c1c4bfd0b540caccbb5179976ebf792" title="A normalised document length.">Xapian::doclength</a> len) <span class="keyword">const</span>;
<a name="l01304"></a>01304         <a class="code" href="namespaceXapian.html#ee1bece7207c349621963d7f584dd98b" title="The weight of a document or term.">Xapian::weight</a> get_maxextra() <span class="keyword">const</span>;
<a name="l01305"></a>01305 
<a name="l01306"></a>01306         <span class="keywordtype">bool</span> get_sumpart_needs_doclength() <span class="keyword">const</span>;
<a name="l01307"></a>01307 };
<a name="l01308"></a>01308 
<a name="l01309"></a>01309 }
<a name="l01310"></a>01310 
<a name="l01311"></a>01311 <span class="preprocessor">#endif </span><span class="comment">/* XAPIAN_INCLUDED_ENQUIRE_H */</span>
</pre></div><hr>
<address><small>
Documentation for Xapian (version 1.0.11).<br>
Generated on 15 Mar 2009 by
<a href="http://www.doxygen.org/">Doxygen 1.5.2</a>.
</small></address>
</body>
</html>
